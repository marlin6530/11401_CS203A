# Tree（樹）

## 定義

Tree 是一種**階層式**資料結構，由節點與邊組成。  
每個節點（除了根）有且僅有一個父節點，可以有 0 個或多個子節點。

## 常見術語

- 根節點（root）：整棵樹的起點，沒有父節點
- 葉節點（leaf）：沒有子節點的節點
- 高度（height）：根到最深葉節點的邊數
- 深度（depth）：某節點到根的距離
- 子樹（subtree）：以某節點為根所構成的樹

## 二元樹（Binary Tree）

每個節點最多有**兩個子節點**，通常稱為 left、right。

### 二元搜尋樹（Binary Search Tree, BST）

- 對於任意節點：
  - 左子樹所有鍵 < 節點鍵
  - 右子樹所有鍵 > 節點鍵
- 中序遍歷（左-中-右）會得到排序好的序列

### BST 的時間複雜度（理想平衡情況）

- 搜尋：(O(log n))
- 插入：(O(log n))
- 刪除：(O(log n))

若退化成鏈（極端不平衡），則為 (O(n))。

## 遍歷方式

- 前序（preorder）：中 → 左 → 右
  - 常用於「輸出樹結構」、「複製樹」
- 中序（inorder）：左 → 中 → 右
  - 對 BST 來說，可取得排序結果
- 後序（postorder）：左 → 右 → 中
  - 常用於刪除樹、計算子樹資訊
- 層序（level order）
  - 使用隊列，逐層從上到下、從左到右

## 實際應用

- **檔案系統**：目錄與檔案的層級結構
- **表達式樹（Expression Tree）**：數學 / 程式運算式解析
- **決策樹（Decision Tree）**：分類、推薦、AI 決策
- **HTML DOM 樹**：瀏覽器解析網頁後的內部樹狀結構
- **資料庫索引**：B-Tree、B+Tree 等

## 優點

- 表示階層結構非常自然
- 在平衡情況下，搜尋與插入效率高
- 可方便做範圍查詢、最小值 / 最大值查詢等

## 缺點

- 若不平衡效率會大幅下降
- 平衡樹實作較複雜（如 AVL、紅黑樹）
- 使用指標實作時，記憶體管理較繁瑣

## 何時使用 Tree

- 問題本身具有「**上下階層**」關係
  - 檔案系統、組織圖、DOM 結構
- 需要**快速搜尋且保留排序**（BST、平衡樹）
- 需要以「路徑」思考的問題（例如：決策路徑）
